---
description:
globs:
alwaysApply: false
---
# í”„ë¡œì íŠ¸ ì„¤ì • ë° í™˜ê²½ êµ¬ì„±

## ì˜ì¡´ì„± ê´€ë¦¬ ([requirements.txt](mdc:requirements.txt))

### í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬
```
# í•µì‹¬ í”„ë ˆì„ì›Œí¬
langchain>=0.1.0
langchain-openai>=0.1.0
langchain-community>=0.1.0

# AI/ML ë¼ì´ë¸ŒëŸ¬ë¦¬
openai>=1.0.0
faiss-cpu>=1.7.0

# ì›¹ ì¸í„°í˜ì´ìŠ¤
gradio>=4.0.0

# ë°ì´í„° ì²˜ë¦¬
beautifulsoup4>=4.12.0
requests>=2.31.0
pandas>=2.0.0
numpy>=1.24.0

# í™˜ê²½ ê´€ë¦¬
python-dotenv>=1.0.0

# í…ìŠ¤íŠ¸ ì²˜ë¦¬
tiktoken>=0.5.0
unstructured>=0.10.0
```

### ì„ íƒì  ë¼ì´ë¸ŒëŸ¬ë¦¬
```
# PDF ì²˜ë¦¬ (í•„ìš”ì‹œ)
pypdf>=3.0.0

# ê³ ê¸‰ íŒŒì‹± (í•„ìš”ì‹œ)
lxml>=4.9.0
html5lib>=1.1

# ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ (í•„ìš”ì‹œ)
loguru>=0.7.0
```

## í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ([.env](mdc:.env))

### í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜
```bash
# OpenAI API ì„¤ì •
OPENAI_API_KEY=your_openai_api_key_here

# ì„ íƒì  ì„¤ì •
OPENAI_MODEL=gpt-3.5-turbo
EMBEDDING_MODEL=text-embedding-ada-002
```

### ê³ ê¸‰ ì„¤ì • (ì„ íƒì‚¬í•­)
```bash
# ë²¡í„° ì €ì¥ì†Œ ì„¤ì •
VECTOR_STORE_TYPE=FAISS
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# UI ì„¤ì •
GRADIO_SERVER_NAME=0.0.0.0
GRADIO_SERVER_PORT=7860
GRADIO_SHARE=False

# ë¡œê¹… ì„¤ì •
LOG_LEVEL=INFO
LOG_FILE=logs/qabot.log
```

## ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±

### ìë™ ë””ë ‰í† ë¦¬ ìƒì„± ìŠ¤í¬ë¦½íŠ¸
```python
import os

def create_project_structure():
    """í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤."""
    directories = [
        "data/extracted",
        "vectorstore",
        "utils",
        "logs",
        "tests",
        "config"
    ]
    
    for directory in directories:
        os.makedirs(directory, exist_ok=True)
        print(f"âœ… ë””ë ‰í† ë¦¬ ìƒì„±: {directory}")
    
    # .gitignore íŒŒì¼ ìƒì„±
    gitignore_content = """
# í™˜ê²½ ë³€ìˆ˜
.env
*.env

# ë°ì´í„° íŒŒì¼
data/
vectorstore/
logs/

# Python
__pycache__/
*.pyc
*.pyo
*.pyd
.Python
env/
venv/
ENV/

# IDE
.vscode/
.idea/
*.swp
*.swo

# ìš´ì˜ì²´ì œ
.DS_Store
Thumbs.db
    """.strip()
    
    with open('.gitignore', 'w') as f:
        f.write(gitignore_content)
    
    print("âœ… .gitignore íŒŒì¼ ìƒì„± ì™„ë£Œ")

if __name__ == "__main__":
    create_project_structure()
```

## ì„¤ì¹˜ ë° ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸

### setup.py (í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •)
```python
#!/usr/bin/env python3
"""
RAG QA ì±—ë´‡ í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • ìŠ¤í¬ë¦½íŠ¸
"""

import os
import subprocess
import sys

def install_requirements():
    """requirements.txtì˜ íŒ¨í‚¤ì§€ë“¤ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤."""
    try:
        subprocess.check_call([sys.executable, "-m", "pip", "install", "-r", "requirements.txt"])
        print("âœ… íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì™„ë£Œ")
    except subprocess.CalledProcessError as e:
        print(f"âŒ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì‹¤íŒ¨: {e}")
        return False
    return True

def create_env_file():
    """í™˜ê²½ë³€ìˆ˜ í…œí”Œë¦¿ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤."""
    env_template = """# OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”
OPENAI_API_KEY=your_openai_api_key_here

# ì„ íƒì  ì„¤ì •
OPENAI_MODEL=gpt-3.5-turbo
EMBEDDING_MODEL=text-embedding-ada-002
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
GRADIO_SERVER_PORT=7860
"""
    
    if not os.path.exists('.env'):
        with open('.env', 'w') as f:
            f.write(env_template)
        print("âœ… .env í…œí”Œë¦¿ íŒŒì¼ ìƒì„± ì™„ë£Œ")
        print("âš ï¸  .env íŒŒì¼ì— ì‹¤ì œ OpenAI API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!")
    else:
        print("â„¹ï¸  .env íŒŒì¼ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤.")

def main():
    print("ğŸš€ RAG QA ì±—ë´‡ í”„ë¡œì íŠ¸ ì„¤ì •ì„ ì‹œì‘í•©ë‹ˆë‹¤...")
    
    # 1. ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
    from create_project_structure import create_project_structure
    create_project_structure()
    
    # 2. íŒ¨í‚¤ì§€ ì„¤ì¹˜
    if install_requirements():
        print("âœ… ì˜ì¡´ì„± ì„¤ì¹˜ ì™„ë£Œ")
    else:
        print("âŒ ì˜ì¡´ì„± ì„¤ì¹˜ ì‹¤íŒ¨")
        return
    
    # 3. í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ìƒì„±
    create_env_file()
    
    print("ğŸ‰ í”„ë¡œì íŠ¸ ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")
    print("ğŸ“ ë‹¤ìŒ ë‹¨ê³„:")
    print("   1. .env íŒŒì¼ì— ì‹¤ì œ OpenAI API í‚¤ ì…ë ¥")
    print("   2. python main.py ì‹¤í–‰")

if __name__ == "__main__":
    main()
```

### run.py (ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰)
```python
#!/usr/bin/env python3
"""
RAG QA ì±—ë´‡ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
"""

import os
import sys
from dotenv import load_dotenv

def check_environment():
    """í™˜ê²½ ì„¤ì •ì„ í™•ì¸í•©ë‹ˆë‹¤."""
    load_dotenv()
    
    # OpenAI API í‚¤ í™•ì¸
    api_key = os.getenv("OPENAI_API_KEY")
    if not api_key or api_key == "your_openai_api_key_here":
        print("âŒ OPENAI_API_KEYê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")
        print("ğŸ“ .env íŒŒì¼ì— ì‹¤ì œ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")
        return False
    
    # í•„ìš”í•œ ë””ë ‰í† ë¦¬ í™•ì¸
    required_dirs = ["data/extracted", "vectorstore"]
    for directory in required_dirs:
        if not os.path.exists(directory):
            os.makedirs(directory, exist_ok=True)
            print(f"âœ… ë””ë ‰í† ë¦¬ ìƒì„±: {directory}")
    
    return True

def main():
    print("ğŸ¤– RAG QA ì±—ë´‡ì„ ì‹œì‘í•©ë‹ˆë‹¤...")
    
    if not check_environment():
        sys.exit(1)
    
    # main.py ì‹¤í–‰
    try:
        from main import main as run_main
        run_main()
    except ImportError:
        print("âŒ main.py íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
        print("ğŸ“ main.py íŒŒì¼ì„ ìƒì„±í•´ì£¼ì„¸ìš”.")
    except Exception as e:
        print(f"âŒ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}")

if __name__ == "__main__":
    main()
```

## ê°œë°œ í™˜ê²½ ì„¤ì •

### VS Code ì„¤ì • (.vscode/settings.json)
```json
{
    "python.defaultInterpreterPath": "./venv/bin/python",
    "python.linting.enabled": true,
    "python.linting.pylintEnabled": true,
    "python.formatting.provider": "black",
    "python.formatting.blackArgs": ["--line-length=88"],
    "files.exclude": {
        "**/__pycache__": true,
        "**/*.pyc": true,
        ".env": true,
        "vectorstore/": true,
        "data/": true
    },
    "python.analysis.extraPaths": ["./utils"]
}
```

### Docker ì„¤ì • (ì„ íƒì‚¬í•­)

#### Dockerfile
```dockerfile
FROM python:3.11-slim

WORKDIR /app

# ì‹œìŠ¤í…œ ì˜ì¡´ì„± ì„¤ì¹˜
RUN apt-get update && apt-get install -y \
    build-essential \
    && rm -rf /var/lib/apt/lists/*

# Python ì˜ì¡´ì„± ì„¤ì¹˜
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ë³µì‚¬
COPY . .

# í¬íŠ¸ ë…¸ì¶œ
EXPOSE 7860

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
CMD ["python", "main.py"]
```

#### docker-compose.yml
```yaml
version: '3.8'

services:
  qabot:
    build: .
    ports:
      - "7860:7860"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
    volumes:
      - ./data:/app/data
      - ./vectorstore:/app/vectorstore
      - ./logs:/app/logs
    restart: unless-stopped
```
